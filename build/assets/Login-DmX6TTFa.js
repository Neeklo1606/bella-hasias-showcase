import{u as v,a as y,r as a,j as e,B as w}from"./index-BjXmukMB.js";import{D,a as N,b as S,c as C,d as E,I as h}from"./input-DAe4lIxK.js";import{L as x}from"./label-OMKLQviY.js";const k=()=>{const t=v(),{login:j,isAuthenticated:n,isAdmin:o,isReady:c}=y(),[d,g]=a.useState(""),[u,f]=a.useState(""),[m,r]=a.useState(null),[p,l]=a.useState(!1);a.useEffect(()=>{c&&n&&o&&t("/admin/dashboard",{replace:!0})},[n,o,c,t]);const b=async s=>{s.preventDefault(),r(null),l(!0);try{const i=await j(d.trim(),u);i.ok?setTimeout(()=>{t("/admin/dashboard",{replace:!0})},100):(r(i.error??"Ошибка авторизации."),l(!1))}catch{r("Ошибка авторизации. Попробуйте еще раз."),l(!1)}};return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:e.jsx(D,{open:!0,children:e.jsxs(N,{className:"sm:max-w-[420px]",children:[e.jsxs(S,{children:[e.jsx(C,{children:"Вход в админку"}),e.jsx(E,{children:"Введите данные администратора, чтобы открыть CMS."})]}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"email",children:"Email"}),e.jsx(h,{id:"email",type:"email",autoComplete:"username",value:d,onChange:s=>g(s.target.value),placeholder:"admin@bella.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"password",children:"Пароль"}),e.jsx(h,{id:"password",type:"password",autoComplete:"current-password",value:u,onChange:s=>f(s.target.value),placeholder:"••••••••",required:!0})]}),m?e.jsx("p",{className:"text-sm text-destructive",children:m}):null,e.jsx(w,{type:"submit",className:"w-full",disabled:p,children:p?"Вход...":"Войти"})]})]})})})};export{k as default};
