import{u as b,a as y,r as a,j as e,B as w}from"./index-Blh6tPbw.js";import{D,a as N,b as S,c as C,d as E,I as h}from"./input-alTnsKvT.js";import{L as x}from"./label-Du9Q029U.js";const k=()=>{const i=b(),{login:j,isAuthenticated:n,isAdmin:o,isReady:c}=y(),[d,g]=a.useState(""),[u,f]=a.useState(""),[m,t]=a.useState(null),[p,r]=a.useState(!1);a.useEffect(()=>{c&&n&&o&&i("/admin/dashboard",{replace:!0})},[n,o,c,i]);const v=async s=>{s.preventDefault(),t(null),r(!0);try{const l=await j(d.trim(),u);l.ok||(t(l.error??"Ошибка авторизации."),r(!1))}catch{t("Ошибка авторизации. Попробуйте еще раз."),r(!1)}};return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center px-4",children:e.jsx(D,{open:!0,children:e.jsxs(N,{className:"sm:max-w-[420px]",children:[e.jsxs(S,{children:[e.jsx(C,{children:"Вход в админку"}),e.jsx(E,{children:"Введите данные администратора, чтобы открыть CMS."})]}),e.jsxs("form",{onSubmit:v,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"email",children:"Email"}),e.jsx(h,{id:"email",type:"email",autoComplete:"username",value:d,onChange:s=>g(s.target.value),placeholder:"admin@bella.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(x,{htmlFor:"password",children:"Пароль"}),e.jsx(h,{id:"password",type:"password",autoComplete:"current-password",value:u,onChange:s=>f(s.target.value),placeholder:"••••••••",required:!0})]}),m?e.jsx("p",{className:"text-sm text-destructive",children:m}):null,e.jsx(w,{type:"submit",className:"w-full",disabled:p,children:p?"Вход...":"Войти"})]})]})})})};export{k as default};
