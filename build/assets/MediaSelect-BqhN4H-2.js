import{r as N,j as s,B as w,b as m}from"./index-Da8R1Z61.js";import{P as g,a as v,C as b,b as C,c as y,d as k,e as I,f as P,g as S,h}from"./popover-CMCXCFyD.js";import{I as x}from"./image-5jGyfhrC.js";import{C as p}from"./check-Cj8ik3qq.js";const l=a=>/\.(mp4|webm)$/i.test(a)||a.startsWith("data:video/"),O=({value:a,onChange:n,items:o,placeholder:u="Выберите медиа",label:c="Изображение",filterImagesOnly:j=!0,allowEmpty:f=!1})=>{const[d,t]=N.useState(!1),i=j?o.filter(e=>!l(e.src)):o,r=i.find(e=>e.id===a);return s.jsxs("div",{className:"space-y-2",children:[c&&s.jsx("label",{className:"text-sm font-medium text-foreground",children:c}),s.jsxs(g,{open:d,onOpenChange:t,children:[s.jsx(v,{asChild:!0,children:s.jsxs(w,{variant:"outline",role:"combobox","aria-expanded":d,className:"w-full justify-between font-normal",children:[s.jsx("span",{className:"flex items-center gap-2 truncate",children:r?s.jsxs(s.Fragment,{children:[s.jsx("span",{className:"relative h-8 w-8 shrink-0 overflow-hidden rounded bg-muted",children:l(r.src)?s.jsx(x,{className:"absolute inset-0 m-auto h-4 w-4 text-muted-foreground"}):s.jsx("img",{src:r.src,alt:r.alt,className:"h-full w-full object-cover"})}),s.jsx("span",{className:"truncate",children:r.alt||r.filename})]}):u}),s.jsx(b,{className:"ml-2 h-4 w-4 shrink-0 opacity-50"})]})}),s.jsx(C,{className:"w-[320px] p-0",align:"start",children:s.jsxs(y,{children:[s.jsx(k,{placeholder:"Поиск..."}),s.jsxs(I,{children:[s.jsx(P,{children:"Медиа не найдено"}),s.jsxs(S,{children:[f&&s.jsxs(h,{value:"без выбора нет empty",onSelect:()=>{n(""),t(!1)},children:[s.jsx("span",{className:"text-muted-foreground",children:"Без выбора"}),s.jsx(p,{className:m("h-4 w-4 shrink-0",a?"opacity-0":"opacity-100")})]}),i.map(e=>s.jsxs(h,{value:`${e.alt} ${e.filename}`,onSelect:()=>{n(e.id),t(!1)},children:[s.jsx("span",{className:"relative mr-3 h-10 w-10 shrink-0 overflow-hidden rounded bg-muted",children:l(e.src)?s.jsx(x,{className:"absolute inset-0 m-auto h-5 w-5 text-muted-foreground"}):s.jsx("img",{src:e.src,alt:e.alt,className:"h-full w-full object-cover"})}),s.jsx("span",{className:"truncate flex-1",children:e.alt||e.filename}),s.jsx(p,{className:m("h-4 w-4 shrink-0",a===e.id?"opacity-100":"opacity-0")})]},e.id))]})]})]})})]})]})};export{O as M};
