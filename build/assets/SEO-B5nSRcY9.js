import{c as B,r as i,w as H,q as J,j as e,P as F,D as K,Q as ee,G as te,b as R,T as se,B as b,S as k,U as N,W as T,Y as U,n as ae,l as re,o as oe,Z as ne}from"./index-k3DuJ_tz.js";import{L as S,I as E}from"./label-CafXyzQ-.js";import{C as q,a as L,c as D,e as M,b as O}from"./card-DK3CJppT.js";import{T as ie}from"./popover-D46gzM3n.js";import{u as ce,S as le}from"./index-1uTjpNEu.js";import{M as de}from"./MediaSelect-D_UDTOXt.js";import{E as I}from"./external-link-B7t6RLvP.js";import{l as me}from"./casesStorage-C3t2rj2t.js";import{u as he}from"./use-resolved-media-f1t8BJoJ.js";import"./image-CrTN3bSh.js";import"./check-B1lSWNHc.js";/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $=B("CircleHelp",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.462.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const P=B("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);var C="Switch",[pe]=te(C),[ue,xe]=pe(C),G=i.forwardRef((s,l)=>{const{__scopeSwitch:n,name:d,checked:t,defaultChecked:m,required:c,disabled:o,value:a="on",onCheckedChange:u,form:p,...x}=s,[f,j]=i.useState(null),g=H(l,w=>j(w)),y=i.useRef(!1),r=f?p||!!f.closest("form"):!0,[h,v]=J({prop:t,defaultProp:m??!1,onChange:u,caller:C});return e.jsxs(ue,{scope:n,checked:h,disabled:o,children:[e.jsx(F.button,{type:"button",role:"switch","aria-checked":h,"aria-required":c,"data-state":Y(h),"data-disabled":o?"":void 0,disabled:o,value:a,...x,ref:g,onClick:K(s.onClick,w=>{v(Z=>!Z),r&&(y.current=w.isPropagationStopped(),y.current||w.stopPropagation())})}),r&&e.jsx(W,{control:f,bubbles:!y.current,name:d,value:a,checked:h,required:c,disabled:o,form:p,style:{transform:"translateX(-100%)"}})]})});G.displayName=C;var z="SwitchThumb",X=i.forwardRef((s,l)=>{const{__scopeSwitch:n,...d}=s,t=xe(z,n);return e.jsx(F.span,{"data-state":Y(t.checked),"data-disabled":t.disabled?"":void 0,...d,ref:l})});X.displayName=z;var fe="SwitchBubbleInput",W=i.forwardRef(({__scopeSwitch:s,control:l,checked:n,bubbles:d=!0,...t},m)=>{const c=i.useRef(null),o=H(c,m),a=ce(n),u=ee(l);return i.useEffect(()=>{const p=c.current;if(!p)return;const x=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(x,"checked").set;if(a!==n&&j){const g=new Event("click",{bubbles:d});j.call(p,n),p.dispatchEvent(g)}},[a,n,d]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:n,...t,tabIndex:-1,ref:o,style:{...t.style,...u,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});W.displayName=fe;function Y(s){return s?"checked":"unchecked"}var Q=G,ge=X;const V=i.forwardRef(({className:s,...l},n)=>e.jsx(Q,{className:R("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors data-[state=checked]:bg-primary data-[state=unchecked]:bg-input focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50",s),...l,ref:n,children:e.jsx(ge,{className:R("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0")})}));V.displayName=Q.displayName;const _=60,A=160,ve=({page:s,mediaItems:l,onSave:n,publicPath:d})=>{const t=s.seo??{metaTitle:"",metaDescription:"",index:!0},[m,c]=i.useState(t.metaTitle),[o,a]=i.useState(t.metaDescription),[u,p]=i.useState(t.ogImageId??""),[x,f]=i.useState(t.index);i.useEffect(()=>{c(t.metaTitle),a(t.metaDescription),p(t.ogImageId??""),f(t.index)},[s.id,t.metaTitle,t.metaDescription,t.ogImageId,t.index]);const j=()=>{n({metaTitle:m.trim(),metaDescription:o.trim(),ogImageId:u||void 0,index:x})},g=m.length,y=o.length,r=g<=_,h=y<=A;return e.jsx(se,{children:e.jsxs("div",{className:"space-y-4 rounded-lg border p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"font-medium",children:s.title}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:d,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(I,{className:"mr-1 h-3 w-3"}),"На сайте"]})}),e.jsx(b,{size:"sm",onClick:j,children:"Сохранить"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{htmlFor:`metaTitle-${s.id}`,children:"Meta Title"}),e.jsxs(k,{children:[e.jsx(N,{asChild:!0,children:e.jsx($,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(T,{className:"max-w-xs",children:"Заголовок для поисковой выдачи. Рекомендуется до 60 символов."})]}),e.jsxs("span",{className:`ml-auto text-xs ${r?"text-muted-foreground":"text-destructive"}`,children:[g,"/",_]})]}),e.jsx(E,{id:`metaTitle-${s.id}`,value:m,onChange:v=>c(v.target.value),placeholder:"Заголовок страницы | Bella Hasias",className:r?"":"border-destructive"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{htmlFor:`metaDesc-${s.id}`,children:"Meta Description"}),e.jsxs(k,{children:[e.jsx(N,{asChild:!0,children:e.jsx($,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(T,{className:"max-w-xs",children:"Описание для сниппета в поиске. Рекомендуется до 160 символов."})]}),e.jsxs("span",{className:`ml-auto text-xs ${h?"text-muted-foreground":"text-destructive"}`,children:[y,"/",A]})]}),e.jsx(ie,{id:`metaDesc-${s.id}`,value:o,onChange:v=>a(v.target.value),placeholder:"Краткое описание страницы для поисковых систем",rows:2,className:h?"":"border-destructive"})]}),e.jsx(de,{label:"OG Image",value:u,onChange:p,items:l,allowEmpty:!0}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{htmlFor:`index-${s.id}`,children:"Индексация"}),e.jsxs(k,{children:[e.jsx(N,{asChild:!0,children:e.jsx($,{className:"h-4 w-4 text-muted-foreground"})}),e.jsx(T,{className:"max-w-xs",children:"index — страница в поиске. noindex — не индексировать."})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:`text-sm font-medium ${x?"text-green-600":"text-amber-600"}`,children:x?"index":"noindex"}),e.jsx(V,{id:`index-${s.id}`,checked:x,onCheckedChange:f})]})]})]})})},je={home:"/",contacts:"/contacts",portfolio:"/portfolio",services:"/services"},ye=[{path:"/services",priority:.9,changefreq:"weekly"},{path:"/portfolio",priority:.8,changefreq:"weekly"},{path:"/privacy",priority:.3,changefreq:"yearly"},{path:"/terms",priority:.3,changefreq:"yearly"},{path:"/consent",priority:.3,changefreq:"yearly"},{path:"/services/brand-styling",priority:.6,changefreq:"monthly"},{path:"/services/wardrobe-audit",priority:.6,changefreq:"monthly"},{path:"/services/personal-shopping",priority:.6,changefreq:"monthly"},{path:"/services/capsule-wardrobe",priority:.6,changefreq:"monthly"},{path:"/services/event-look",priority:.6,changefreq:"monthly"},{path:"/services/client-shoot",priority:.6,changefreq:"monthly"},{path:"/services/ugc",priority:.6,changefreq:"monthly"},{path:"/services/photo-video",priority:.6,changefreq:"monthly"},{path:"/services/ai-content",priority:.6,changefreq:"monthly"}],be=(s,l,n)=>{var o;const t=U().siteUrl.replace(/\/$/,""),m=a=>new Date(a).toISOString().slice(0,10),c=[];for(const a of s){if(((o=a.seo)==null?void 0:o.index)===!1)continue;const u=je[a.slug]??`/${a.slug}`,p=m(a.updatedAt),x=a.slug==="home"?"1.0":"0.8",f=a.slug==="home"?"weekly":"monthly";c.push(`  <url>
    <loc>${t}${u}</loc>
    <lastmod>${p}</lastmod>
    <changefreq>${f}</changefreq>
    <priority>${x}</priority>
  </url>`)}for(const a of l)c.push(`  <url>
    <loc>${t}/portfolio/${a.slug}</loc>
    <lastmod>${m(a.updatedAt)}</lastmod>
    <changefreq>monthly</changefreq>
    <priority>0.7</priority>
  </url>`);for(const a of ye)c.some(u=>u.includes(`<loc>${t}${a.path}</loc>`))||c.push(`  <url>
    <loc>${t}${a.path}</loc>
    <lastmod>${m(new Date().toISOString())}</lastmod>
    <changefreq>${a.changefreq}</changefreq>
    <priority>${a.priority}</priority>
  </url>`);return`<?xml version="1.0" encoding="UTF-8"?>
<urlset xmlns="http://www.sitemaps.org/schemas/sitemap/0.9">
${c.join(`
`)}
</urlset>`},we=(s,l)=>{const n=be(s,l),d=new Blob([n],{type:"application/xml"}),t=URL.createObjectURL(d),m=document.createElement("a");m.href=t,m.download="sitemap.xml",m.click(),URL.revokeObjectURL(t)},Se={home:"/",contacts:"/contacts",portfolio:"/portfolio",services:"/services"},Ce=(s,l)=>{var c;const d=U().siteUrl.replace(/\/$/,""),t=["/admin","/admin/"];for(const o of s)if(((c=o.seo)==null?void 0:c.index)===!1){const a=Se[o.slug]??`/${o.slug}`;a!=="/"&&t.push(a)}return["User-agent: *","Allow: /",...t.map(o=>`Disallow: ${o}`),"",`Sitemap: ${d}/sitemap.xml`,`Host: ${d}`].join(`
`)},ke=s=>{const l=Ce(s),n=new Blob([l],{type:"text/plain"}),d=URL.createObjectURL(n),t=document.createElement("a");t.href=d,t.download="robots.txt",t.click(),URL.revokeObjectURL(d)},Ne="https://search.google.com/test/rich-results",Te="https://webmaster.yandex.ru/",_e=()=>{const[s,l]=i.useState([]),[n,d]=i.useState([]),[t,m]=i.useState(""),[c,o]=i.useState("");i.useEffect(()=>{l(ae()),d(re()),o(U().siteUrl)},[]);const a=i.useCallback(r=>{l(r),oe(r)},[]),u=i.useCallback((r,h)=>{a(s.map(v=>v.id===r?{...v,seo:h}:v))},[s,a]),p=()=>{ne({siteUrl:c.trim()||"https://example.com"})},x=()=>{we(s,me())},f=()=>{ke(s)},j=he(n),g=i.useMemo(()=>{if(!t.trim())return s;const r=t.trim().toLowerCase();return s.filter(h=>h.title.toLowerCase().includes(r)||h.slug.toLowerCase().includes(r))},[s,t]),y=r=>r.slug==="home"?"/":`/${r.slug}`;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold tracking-tight",children:"SEO"}),e.jsx("p",{className:"mt-1 text-sm text-muted-foreground",children:"Мета-информация страниц, sitemap и robots.txt"})]}),e.jsxs(q,{children:[e.jsxs(L,{children:[e.jsx(D,{children:"URL сайта"}),e.jsx(M,{children:"Базовый URL для sitemap.xml и robots.txt"})]}),e.jsxs(O,{className:"flex flex-col gap-4 sm:flex-row sm:items-end",children:[e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx(S,{htmlFor:"siteUrl",children:"Site URL"}),e.jsx(E,{id:"siteUrl",value:c,onChange:r=>o(r.target.value),placeholder:"https://your-site.com"})]}),e.jsx(b,{onClick:p,children:"Сохранить"})]})]}),e.jsxs(q,{children:[e.jsxs(L,{children:[e.jsx(D,{children:"Генерация файлов"}),e.jsx(M,{children:"Скачайте sitemap.xml и robots.txt и поместите в папку public/"})]}),e.jsxs(O,{className:"flex flex-wrap gap-4",children:[e.jsxs(b,{variant:"outline",onClick:x,children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Скачать sitemap.xml"]}),e.jsxs(b,{variant:"outline",onClick:f,children:[e.jsx(P,{className:"mr-2 h-4 w-4"}),"Скачать robots.txt"]})]})]}),e.jsxs("div",{className:"flex flex-col gap-4 sm:flex-row sm:items-center",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(le,{className:"absolute left-3 top-1/2 h-4 w-4 -translate-y-1/2 text-muted-foreground"}),e.jsx(E,{placeholder:"Поиск по странице...",value:t,onChange:r=>m(r.target.value),className:"pl-9 max-w-md"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(b,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:Ne,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(I,{className:"mr-1 h-3 w-3"}),"Google Rich Results"]})}),e.jsx(b,{variant:"outline",size:"sm",asChild:!0,children:e.jsxs("a",{href:Te,target:"_blank",rel:"noopener noreferrer",children:[e.jsx(I,{className:"mr-1 h-3 w-3"}),"Яндекс Вебмастер"]})})]})]}),e.jsx("div",{className:"space-y-4",children:g.map(r=>e.jsx(ve,{page:r,mediaItems:j,onSave:h=>u(r.id,h),publicPath:y(r)},r.id))}),g.length===0&&e.jsx("p",{className:"py-8 text-center text-sm text-muted-foreground",children:s.length===0?"Нет страниц. Добавьте страницы в разделе Страницы.":"Нет результатов по поиску."})]})};export{_e as default};
